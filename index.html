<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>My Calendar</title>
  <head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" /> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>

  
</head>
</head>
  <body>
<style>/* FullCalendar styles */
#calendar {
  max-width: 900px;
  margin: 0 auto;
}

/* Form styles */
form {
  margin-top: 20px;
}

label {
  display: block;
  margin-bottom: 5px;
}

input[type="text"],
input[type="date"] {
  padding: 5px;
  margin-bottom: 10px;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button[type="submit"] {
  background-color: #4CAF50;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button[type="submit"]:hover {
  background-color: #45a049;
}
</style>
    <div id="calendar"></div>

    <form id="eventForm">
      <label for="eventTitle">Event Title:</label>
      <input type="text" id="eventTitle" name="eventTitle">
      <label for="eventDate">Event Date:</label>
      <input type="date" id="eventDate" name="eventDate">
      <button type="submit">Add Event</button>
    </form>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
  <!-- Moment.js library -->
 <script>
$(document).ready(function() {
  // initialize the calendar
  $('#calendar').fullCalendar({
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    },
	allDayDefault: true,
    events: []
  });

  // get events from API and add them to calendar
  async function fetchEvents() {
    try {
      const response = await fetch('https://backend-for-plans.onrender.com/plans');
      const events = await response.json();

      // add events to calendar
      $('#calendar').fullCalendar('addEventSource', events);
      $('#calendar').fullCalendar('render');
    } catch (error) {
      console.error(error);
    }
  }

  fetchEvents();
  
  
  
  
  
 $(document).ready(function() {
  const form = $('#eventForm');
  
  form.submit(async function(event) {
    event.preventDefault();
    
    // get form values
    const title = $('#eventTitle').val();
   const date = moment($('#eventDate').val()).format('YYYY-MM-DD'); // convert to desired format

    // create new event object
    const newEvent = {
      title: title,
      start: moment(date).format('YYYY-MM-DD'),
	  allDay: true
    };

    try {
      // send new event to API
      const response = await fetch('https://backend-for-plans.onrender.com/plans', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(newEvent)
      });

      if (!response.ok) {
        alert('Failed to add event');
      }
      if (response.ok) {
        alert('Success to add event');
      }

      // add new event to calendar
      $('#calendar').fullCalendar('renderEvent', newEvent);

      // clear form
      $('#eventTitle').val('');
      $('#eventDate').val('');
    } catch (error) {
      console.error(error);
    }
  });
});

});
  
  
 





</script>
	
	
	
	

  </body>
</html>
